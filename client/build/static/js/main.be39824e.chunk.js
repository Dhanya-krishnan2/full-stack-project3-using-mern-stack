(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{254:function(e,t,a){e.exports=a(495)},261:function(e,t,a){},262:function(e,t,a){},263:function(e,t,a){},310:function(e,t,a){},312:function(e,t,a){},313:function(e,t,a){},314:function(e,t,a){},365:function(e,t,a){},366:function(e,t,a){},368:function(e,t,a){},369:function(e,t,a){},370:function(e,t,a){},494:function(e,t,a){},495:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(34),s=a.n(r),c=a(163),o=a.n(c),i=a(114),m=a(247),u=a(20),d=a(21),h=a(25),v=a(24),E=a(26),p=a(498),g=a(499),f=a(253);a(261);function b(e){var t=e.fluid,a=e.children;return l.a.createElement("div",{className:"container".concat(t?"-fluid":"")},a)}function N(e){var t=e.fluid,a=e.children;return l.a.createElement("div",{className:"row".concat(t?"-fluid":"")},a)}function y(e){var t=e.size,a=e.children;return l.a.createElement("div",{className:t.split(" ").map(function(e){return"col-"+e}).join(" ")},a)}var x=function(e){var t=e.children;return l.a.createElement("div",{style:{height:300,clear:"both",paddingTop:120,textAlign:"center"},className:"jumbotron"},t)};var O=function(){return l.a.createElement(b,{fluid:!0},l.a.createElement(N,null,l.a.createElement(y,{size:"md-12"},l.a.createElement(x,null,l.a.createElement("h1",null,"404 Page Not Found"),l.a.createElement("h1",null,l.a.createElement("span",{role:"img","aria-label":"Face With Rolling Eyes Emoji"},"\ud83d\ude44"))))))},j=(a(262),a(263),a(248)),w=a.n(j),T=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return this.props.show?l.a.createElement(w.a,null,l.a.createElement("div",{className:"backdropStyle"},l.a.createElement("div",{className:"modalStyle"},this.props.children,l.a.createElement("div",{className:"footerStyle"})))):null}}]),t}(l.a.Component),S=a(64),C=(a(310),function(){return l.a.createElement(S.c,{color:"mdb-color",className:"font-small pt-1 mt-1"},l.a.createElement(S.b,{className:"text-center text-md-left"},l.a.createElement(S.d,{className:"text-center text-md-left mt-3 pb-3"},l.a.createElement("hr",{className:"w-100 clearfix d-md-none"}),l.a.createElement(S.a,{md:"4",lg:"3",xl:"3",className:"mx-auto mt-3"},l.a.createElement("h6",{className:"text-uppercase mb-4 font-weight-bold"},"Dhanya Kunhikrishnan"),l.a.createElement("p",null,l.a.createElement("a",{href:"https://github.com/Dhanya-krishnan2"},l.a.createElement("i",{className:"fab fa-github-square mr-3"}))," Full Stack Web Developer"),l.a.createElement("p",null,l.a.createElement("a",{href:"https://www.linkedin.com/in/dhankrish/"},l.a.createElement("i",{className:"fab fa-linkedin mr-3"}))," Perth, WA, Australia")),l.a.createElement("hr",{className:"w-100 clearfix d-md-none"}),l.a.createElement("hr",{className:"w-100 clearfix d-md-none"}),l.a.createElement("hr",{className:"w-100 clearfix d-md-none"})),l.a.createElement("hr",null),l.a.createElement(S.d,{className:"d-flex align-items-center"},l.a.createElement(S.a,{md:"12",lg:"12"},l.a.createElement("p",{className:"text-center text-md-left grey-text"},"\xa9 ",(new Date).getFullYear()," Copyright "," ",l.a.createElement("a",{href:"https://github.com/Dhanya-krishnan2/full-stack-project3-using-mern-stack",className:"title"}," ",l.a.createElement("b",null,l.a.createElement("em",null,"Order Me"))))))))}),k=a(35),I=a(165),U=l.a.createContext({}),D=(a(311),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={isLoading:!0,signUpError:"",signInError:"",signInEmail:"",signInPassword:"",signUpEmail:"",signUpPassword:""},a.onTextboxChangeSignInEmail=a.onTextboxChangeSignInEmail.bind(Object(k.a)(Object(k.a)(a))),a.onTextboxChangeSignInPassword=a.onTextboxChangeSignInPassword.bind(Object(k.a)(Object(k.a)(a))),a.onTextboxChangeSignUpEmail=a.onTextboxChangeSignUpEmail.bind(Object(k.a)(Object(k.a)(a))),a.onTextboxChangeSignUpPassword=a.onTextboxChangeSignUpPassword.bind(Object(k.a)(Object(k.a)(a))),a.onSignIn=a.onSignIn.bind(Object(k.a)(Object(k.a)(a))),a.onSignUp=a.onSignUp.bind(Object(k.a)(Object(k.a)(a))),a.logout=a.logout.bind(Object(k.a)(Object(k.a)(a))),a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/account/verify").then(function(e){return e.json()}).then(function(t){e.setState({isLoading:!1})})}},{key:"onTextboxChangeSignInEmail",value:function(e){this.setState({signInEmail:e.target.value})}},{key:"onTextboxChangeSignInPassword",value:function(e){this.setState({signInPassword:e.target.value})}},{key:"onTextboxChangeSignUpEmail",value:function(e){this.setState({signUpEmail:e.target.value})}},{key:"onTextboxChangeSignUpPassword",value:function(e){this.setState({signUpPassword:e.target.value})}},{key:"onSignUp",value:function(){var e=this,t=this.state,a=t.signUpEmail,n=t.signUpPassword;this.setState({isLoading:!0}),fetch("/api/account/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:n})}).then(function(e){return e.json()}).then(function(t){console.log("json",t),t.success?e.setState({signUpError:t.message,isLoading:!1,signUpEmail:"",signUpPassword:""}):e.setState({signUpError:t.message,isLoading:!1})})}},{key:"onSignIn",value:function(){var e=this,t=this.state,a=t.signInEmail,n=t.signInPassword;this.setState({isLoading:!0}),fetch("/api/account/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.trim(),password:n.trim()})}).then(function(e){return e.json()}).then(function(t){console.log("json",t),t.success?e.setState({signInError:t.message,isLoading:!1,signInEmail:""},function(){e.context.setUser(Object(i.a)({},t.user,{anonymous:!1}))}):e.setState({signInError:t.message,isLoading:!1},function(){e.context.setUser({anonymous:!0})})})}},{key:"logout",value:function(){var e=this;this.context.setUser({anonymous:!0}),this.setState({isLoading:!0},function(){fetch("/api/account/logout").then(function(e){return e.json()}).then(function(t){e.setState({isLoading:!1})})})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.signInError,n=e.signInEmail,r=e.signInPassword,s=e.signUpEmail,c=e.signUpPassword,o=e.signUpError,i=this.context.user;return t?l.a.createElement("div",null,l.a.createElement("p",null,"Loading...")):i.anonymous?l.a.createElement("div",null,l.a.createElement("div",null,a&&l.a.createElement("p",null,a),l.a.createElement("div",{className:"row"},l.a.createElement("p",null,"Log In To Start Ordering!")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col d-flex flex-column justify-content-center"},l.a.createElement("input",{type:"email",placeholder:"Email",value:n,className:"flex-grow",onChange:this.onTextboxChangeSignInEmail}),l.a.createElement("input",{type:"password",placeholder:"Password",value:r,className:"flex-grow",onChange:this.onTextboxChangeSignInPassword})),l.a.createElement("div",{className:"col d-flex justify-content-end"},l.a.createElement("button",{className:"btn btn-general",onClick:this.onSignIn},"Login")))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,o?l.a.createElement("p",null,o):null,l.a.createElement("div",{className:"row"},l.a.createElement("p",null,"Sign Up")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col d-flex flex-column justify-content-center"},l.a.createElement("input",{type:"email",placeholder:"Email",value:s,className:"flex-grow",onChange:this.onTextboxChangeSignUpEmail}),l.a.createElement("input",{type:"password",placeholder:"Password",value:c,className:"flex-grow",onChange:this.onTextboxChangeSignUpPassword})),l.a.createElement("div",{className:"col d-flex justify-content-end"},l.a.createElement("button",{className:"btn btn-general",onClick:this.onSignUp},"Sign Up"))))):l.a.createElement("div",null,l.a.createElement(I.a,{className:"navbar-brand",to:"/home"},l.a.createElement("div",{className:"btn btn-general"},"Take me to the Home Page")))}}]),t}(n.Component));D.contextType=U;var M=D,L=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(l)))).state={show:!1},a.toggleModal=function(){var e=!a.state.show;a.setState({show:e})},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(b,null,l.a.createElement("nav",{className:"navbar navbar-expand-lg bg-light fixed-top navbar-light mb-2"},l.a.createElement(I.a,{className:"navbar-brand",to:"/"},"Order Me"),l.a.createElement("button",{onClick:this.toggleNav,className:"navbar-toggler","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"}))),l.a.createElement("div",{className:"landingPageBackground d-flex align-items-center justify-content-center"},l.a.createElement("div",{className:"landingPageMainText mx-3"},l.a.createElement("div",{className:"col"},l.a.createElement("div",{className:"landingPageTitle"},l.a.createElement("h1",{className:"text-center"},"Order Me This"),l.a.createElement("h4",null,"Organize your office lunch runs"))),l.a.createElement("div",{className:"col d-flex justify-content-center flex-column mb-3"},l.a.createElement("input",{type:"button",onClick:this.toggleModal,id:"signUpButton",value:"SignUp | LogIn",className:"btn btn-general"}),l.a.createElement(T,{show:this.state.show,onClose:this.toggleModal},l.a.createElement(M,{handleSignIn:this.props.handleSignIn}))))),l.a.createElement(C,null))}}]),t}(n.Component),P=(a(312),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(l)))).state={open:!1,width:window.innerWidth,user:a.context.user},a.logout=function(){a.context.setUser({anonymous:!0}),a.context.auth.logout(),a.setState({isLoading:!0},function(){fetch("/api/account/logout").then(function(e){return e.json()}).then(function(e){a.setState({isLoading:!1},function(){window.location.replace("/home")})})})},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.context.user._id;return l.a.createElement("nav",{className:"navbar navbar-expand-lg bg-light fixed-top navbar-light mb-2"},l.a.createElement(I.a,{className:"navbar-brand",to:"/"},"Order Me This"),l.a.createElement("button",{onClick:this.toggleNav,className:"navbar-toggler","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"".concat(this.state.open?"":"collapse ","navbar-collapse"),id:"navbarNav"},l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(I.a,{onClick:this.toggleNav,className:"/home"===window.location.pathname?"nav-link active":"nav-link",to:"/home"},"Create Event")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(I.a,{onClick:this.toggleNav,className:"/myEvents"===window.location.pathname?"nav-link active":"nav-link",to:"/myEvents/".concat(e)},"My Events")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(I.a,{onClick:this.logout,className:"/"===window.location.pathname?"nav-link active":"nav-link",to:"/"},"Logout")))))}}]),t}(n.Component));P.contextType=U;var R=P,_=a(76),A=a.n(_),B=(a(313),a(314),a(251)),q=(a(344),a(345),[{headerName:"Name",field:"name"},{headerName:"Email",field:"email"},{headerName:"Order",field:"foodOrder"},{headerName:"Price",field:"price"},{headerName:"Special Request",field:"specialRequest"}]);var F=function(e){var t=e.eventName,a=e.eventDateTime,n=e.id,r=e.restaurantMenuURL,s=e.message,c=e.orderDateTime,o=e.restaurantName,i=e.sendToEmail,m=e.orders;return l.a.createElement("div",{className:"mt-4 px-5"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col event-".concat(n," event-summary")},l.a.createElement("p",null,"Title: ",l.a.createElement("strong",null,t)),l.a.createElement("p",null,"Location: ",l.a.createElement("strong",null,o)),l.a.createElement("p",null,"Date of event: ",l.a.createElement("strong",null,a)),l.a.createElement("p",null,"Order by (date and time): ",l.a.createElement("strong",null,c))),l.a.createElement("div",{className:"col"},l.a.createElement("a",{className:"btn btn-outline-general mx-2",role:"button",href:r,target:"_blank",rel:"noopener noreferrer"},"View Menu")),l.a.createElement("div",{className:"col-12"},l.a.createElement("p",null,"Invitation(s) sent to: ",l.a.createElement("strong",null,i)),l.a.createElement("p",null,"Message included(optional): ",l.a.createElement("strong",null,s)))),l.a.createElement("div",{className:"row d-flex"},l.a.createElement("div",{className:"col-12 order-summary"},l.a.createElement("p",null,l.a.createElement("small",null,"Summary of orders are below. Columns can be dragged by order of importance to you.")),l.a.createElement("div",{className:"ag-theme-balham ",style:{height:"200px"}},l.a.createElement(B.AgGridReact,{columnDefs:q,rowData:m})))))},Y=a(50),H=a.n(Y),W={loadEvents:function(){return H.a.get("/api/event/")},loadEventsByHost:function(e){return H.a.get("/api/user/"+e+"/event")},getEvent:function(e){return H.a.get("/api/event/"+e)},deleteEvent:function(e){return H.a.delete("/api/event/"+e)},saveEvent:function(e){return H.a.post("/api/event",e)},createNewOrder:function(e){return H.a.post("/api/orders",{newOrders:e})},updateOrder:function(e,t){return H.a.put("/api/orders/"+e,t)},findAllOrders:function(e){return H.a.get("/api/event/"+e+"/orders")}},J=a(75);a(365),a(366);function z(e){return l.a.createElement("div",{className:"form-group"},l.a.createElement("input",Object.assign({className:"form-control"},e)))}function V(e){return l.a.createElement("div",{className:"form-group"},l.a.createElement("textarea",Object.assign({className:"form-control",rows:"3"},e)))}var G=a(217),K=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(J.a)({},n,l))},a.handleFormSubmit=function(e){e.preventDefault();var t={name:a.state.name?a.state.name:a.props.name,foodOrder:a.state.foodOrder?a.state.foodOrder:a.props.foodOrder,specialRequest:a.state.specialRequest?a.state.specialRequest:a.props.specialRequest,price:a.state.price?a.state.price:a.props.price,date:G().format("MMMM Do YYYY, h:mm:ss a")};a.props.updateOrder(a.props.id,t)},a.state={name:"",foodOrder:"",specialRequest:"",price:""},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.foodOrder,n=e.specialRequest,r=e.price,s=e.email,c=e.date;return l.a.createElement("div",{className:"orders"},l.a.createElement("h4",{className:"mr-3 mt-3"},"Fill in the blanks to make your order"),l.a.createElement("div",{className:"results-area mt-1 p-5"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("p",null,"Your Email: ",l.a.createElement("b",null,s))),l.a.createElement("div",{className:"col-6"},l.a.createElement("div",null,l.a.createElement("p",null,"Your name"),l.a.createElement(z,{value:this.state.name,onChange:this.handleInputChange,name:"name",placeholder:"Enter your name"})),l.a.createElement("div",null,l.a.createElement("p",null,"Your order"),l.a.createElement(z,{value:this.state.foodOrder,onChange:this.handleInputChange,name:"foodOrder",placeholder:"Enter your order"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement("div",null,l.a.createElement("p",null,"Special requests"),l.a.createElement(z,{value:this.state.specialRequest,onChange:this.handleInputChange,name:"specialRequest",placeholder:"Enter any special requests"})),l.a.createElement("div",null,l.a.createElement("p",null,"Price + tax"),l.a.createElement(z,{value:this.state.price,onChange:this.handleInputChange,name:"price",placeholder:"Enter the price + tax"})))),l.a.createElement("p",null,"Saved as: Name: ",l.a.createElement("strong",null,t),", Order: ",l.a.createElement("strong",null,a),", Price: ",l.a.createElement("strong",null,r),", Special Requests: ",l.a.createElement("strong",null,n)),l.a.createElement("div",{className:"update-button"},l.a.createElement("button",{type:"button",className:"btn btn-primary mx-2",onClick:this.handleFormSubmit},"Update Order"))),l.a.createElement("div",{className:"col-12"},l.a.createElement("p",null,"Date and Time of Last Change: ",l.a.createElement("b",null,c))))}}]),t}(n.Component),Q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).getEvent=function(e){W.getEvent(e).then(function(e){return a.setState({eventById:e.data},console.log(e.data))}).catch(function(e){return console.log(e)})},a.findAllOrders=function(e){console.log(e),W.findAllOrders(e).then(function(e){return a.setState({orders:e.data},console.log("event page ",e.data))}).catch(function(e){return console.log(e)})},a.updateOrder=function(e,t){console.log(a.state.eventById),W.updateOrder(e,t).then(function(e){return a.findAllOrders(a.props.match.params.id)}).catch(function(e){return console.log(e)})},a.state={eventById:{},orders:[]},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getEvent(this.props.match.params.id),this.findAllOrders(this.props.match.params.id)}},{key:"render",value:function(){var e=this,t=this.state.eventById,a=this.state.orders;return console.log(this.state.eventById),l.a.createElement(A.a,{left:!0},l.a.createElement("div",null,l.a.createElement(R,null),l.a.createElement("div",{className:"container d-flex justify-content-center"},l.a.createElement("div",{className:"eventBackground justify-content-center"},l.a.createElement("div",{className:"eventBody"},l.a.createElement("div",{className:"eventsTitle col text-center text-white"},l.a.createElement("h1",null," Event Summary ")),l.a.createElement("div",{className:"eventArea p-3"},l.a.createElement("h4",null,"See event details and add your order below."),this.state.eventById?l.a.createElement(F,{key:t._id,id:t._id,eventName:t.eventName,eventDateTime:t.eventDateTime,message:t.message,orderDateTime:t.orderDateTime,restaurantMenuURL:t.restaurantMenuURL,restaurantName:t.restaurantName,sendToEmail:t.sendToEmail,orders:a}):l.a.createElement("h3",null,"No Results to Display")),l.a.createElement("div",{className:"ordersArea p-3"},a.length?a.map(function(t){return l.a.createElement(K,{key:t._id,id:t._id,email:t.email,name:t.name,foodOrder:t.foodOrder,specialRequest:t.specialRequest,price:t.price,date:t.date,updateOrder:e.updateOrder})}):l.a.createElement("h3",null,"No Results to Display")))))))}}]),t}(n.Component);a(368),a(369);var X=function(e){var t=e.deleteEvent,a=e.eventName,n=e.eventDateTime,r=e.id,s=e.restaurantMenuURL,c=e.message,o=e.orderDateTime,i=e.restaurantName,m=e.sendToEmail;return l.a.createElement("div",{className:"mt-4 px-5"},l.a.createElement("div",{className:"row d-flex eventTitleInfo-and-buttons"},l.a.createElement("div",{className:"flex-grow-1 event-".concat(r)},l.a.createElement("p",null,"Title: ",l.a.createElement("strong",null,l.a.createElement(I.a,{to:"/event/".concat(r)},a))),l.a.createElement("p",null,"Location: ",l.a.createElement("strong",null,i)),l.a.createElement("p",null,"Date of event: ",l.a.createElement("strong",null,n)),l.a.createElement("p",null,"Order by (date and time): ",l.a.createElement("strong",null,o)),l.a.createElement("p",null,"Invitation(s) sent to: ",l.a.createElement("strong",null,m)),l.a.createElement("p",null,"Message/Instructions ",l.a.createElement("em",null,"(optional)"),": ",l.a.createElement("strong",null,c))),l.a.createElement("div",{className:"view-save"},l.a.createElement("a",{className:"btn btn-outline-general mx-2",role:"button",href:s,target:"_blank",rel:"noopener noreferrer"},"View Menu"),l.a.createElement("button",{type:"button",className:"btn btn-general mx-2",onClick:function(){return t(r)}},"Delete"))),l.a.createElement("div",{className:"row d-flex summary"},l.a.createElement("div",{className:"col-9 event-summary"})))},Z=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(l)))).state={events:[]},a.loadEventsByHost=function(e){W.loadEventsByHost(e).then(function(e){return a.setState({events:e.data})}).catch(function(e){return console.log(e)})},a.deleteEvent=function(e){W.deleteEvent(e).then(function(e){return a.loadEventsByHost(a.props.match.params.id)}).catch(function(e){return console.log(e)})},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props.match.params.id),this.loadEventsByHost(this.props.match.params.id)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(R,null),l.a.createElement(A.a,{left:!0},l.a.createElement("div",{className:"container d-flex justify-content-center"},l.a.createElement("div",{className:"myEventsBackground justify-content-center"},l.a.createElement("div",{className:"myEventsTitle col text-center"},l.a.createElement("h1",null," All My Events ")),l.a.createElement("div",{className:"myEventsArea p-3"},l.a.createElement("small",null,"Click on an event name to see the full details"),this.state.events.length?this.state.events.map(function(t){return l.a.createElement(X,{key:t._id,id:t._id,deleteEvent:e.deleteEvent,eventName:t.eventName,eventDateTime:t.eventDateTime,message:t.message,orderDateTime:t.orderDateTime,restaurantMenuURL:t.restaurantMenuURL,restaurantName:t.restaurantName,sendToEmail:t.sendToEmail})}):l.a.createElement("h3",null,"No Results to Display"))))))}}]),t}(n.Component),$=a(496),ee=(a(370),a(166)),te=a.n(ee),ae=a(497),ne=a(217),le=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(l)))).state={eventName:"",eventDateTime:"",orderDateTime:"",restaurantName:"",restaurantMenuURL:"",sendToEmail:[],fromName:"",message:"",user:a.context.user,formEmailSent:!1},a.handleInputChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(J.a)({},n,l))},a.handleFormSubmit=function(e){e.preventDefault(),console.log("button clicked"),a.sendEmail("default_service","template_UtW4u8r2",a.state.eventName,a.state.eventDateTime,a.state.orderDateTime,a.state.restaurantName,a.state.restaurantMenuURL,a.state.sendToEmail,a.state.fromName,a.state.message,a.state.user._id),a.setState({formSubmitted:!0})},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"sendEmail",value:function(e,t,a,n,l,r,s,c,o,i,m){var u=this;console.log(m),W.saveEvent({eventName:this.state.eventName,hostId:m,eventDateTime:this.state.eventDateTime,orderDateTime:this.state.orderDateTime,restaurantName:this.state.restaurantName,restaurantMenuURL:this.state.restaurantMenuURL,sendToEmail:this.state.sendToEmail,fromName:this.state.fromName,message:this.state.message}).then(function(c){console.log(c);var m=c.data.sendToEmail,d=m.split(/[ ,]+/).map(function(e){return{eventID:c.data._id,email:e,date:ne().format("MMMM Do YYYY, h:mm:ss a")}}),h={event_name:a,event_id:c.data._id,event_date:n,order_date:l,restaurant_name:r,restaurant_menu_URL:s,to_email:m,from_name:o,order_me_this_event_link:"".concat(window.location.protocol,"//").concat(window.location.host,"/event"),message_html:i};window.emailjs.send(e,t,h).then(function(e){alert("Sent!"),W.createNewOrder(d).then(function(e){return u.setState({formEmailSent:!0})})})}).catch(function(e){return alert("Failed to send email. Error: ",e)})}},{key:"render",value:function(){return this.state.formEmailSent?l.a.createElement(ae.a,{to:"/myEvents/".concat(this.state.user._id)}):l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("form",null,l.a.createElement("small",null,"Name your event to save it and find it easier later."),l.a.createElement(z,{value:this.state.eventName,onChange:this.handleInputChange,name:"eventName",placeholder:"Event Name"}),l.a.createElement("small",null,"Separate emails by a comma (ex. Joe@gmail.com, Mandy@email.com)."),l.a.createElement(V,{value:this.state.sendToEmail,onChange:this.handleInputChange,name:"sendToEmail",placeholder:"Send To Email (required)"}),l.a.createElement("small",null,"Fill out some details for the invitations."),l.a.createElement(z,{value:this.state.restaurantName,onChange:this.handleInputChange,name:"restaurantName",placeholder:"Name of Restaurant"}),l.a.createElement(z,{value:this.state.restaurantMenuURL,onChange:this.handleInputChange,name:"restaurantMenuURL",id:"inputEmailInvite",placeholder:"Restaurant Menu Link"}),l.a.createElement("small",null,"Hover and click the arrow to choose a calendar date. Enter a time. Invitation needs a date and time to send."),l.a.createElement("div",{className:"row text-fields px-3 mb-3"},l.a.createElement("div",{className:"col d-flex textFieldBorder"},l.a.createElement(te.a,{id:"datetime-local",label:"Date/Time of Event",type:"datetime-local",onChange:this.handleInputChange,value:this.state.eventDateTime?this.state.eventDateTime:"",name:"eventDateTime",InputLabelProps:{shrink:!0}})),l.a.createElement("div",{className:"col d-flex textFieldBorder"},l.a.createElement(te.a,{id:"datetime-local",label:"Order Must Be Placed By",type:"datetime-local",onChange:this.handleInputChange,value:this.state.orderDateTime?this.state.orderDateTime:"",name:"orderDateTime",InputLabelProps:{shrink:!0}}))),l.a.createElement(V,{value:this.state.message,onChange:this.handleInputChange,name:"message",placeholder:"Email Message(Optional)"}),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("p",{className:"emailLetterText"},"From "),l.a.createElement(z,{value:this.state.fromName,onChange:this.handleInputChange,name:"fromName",placeholder:"From Name (Optional)"})),l.a.createElement("div",{className:"row d-flex justify-content-end"},l.a.createElement("button",{className:"btn btn-general mx-3",disabled:!(this.state.sendToEmail&&this.state.eventName&&this.state.restaurantName&&this.state.eventDateTime&&this.state.orderDateTime),onClick:this.handleFormSubmit},"Send"))))))}}]),t}(n.Component);le.contextType=U;var re=le,se=(a(494),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(l)))).state={user:a.context.user},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(R,{className:"nav"},l.a.createElement($.a,{exact:!0,to:"/",activeClassName:"active"},"Home"),l.a.createElement($.a,{to:"/eventInfo",activeClassName:"active"},"Event Info"),l.a.createElement($.a,{to:"/confirm",activeClassName:"active"},"Confirm Order"),l.a.createElement($.a,{to:"/favorites",activeClassName:"active"},"Favorites")),l.a.createElement(A.a,{left:!0},l.a.createElement("div",{className:"container d-flex justify-content-center"},l.a.createElement("div",{className:"homeBackground d-flex justify-content-center"},l.a.createElement("div",{className:"homeArea"},l.a.createElement("div",{className:"homeTitle text-center"},l.a.createElement("p",null,"Welcome, ",this.state.user.email),l.a.createElement("p",null,"Fill in the blanks to send your invitations.")),l.a.createElement("div",{className:"p-3"},l.a.createElement(re,null)))))))}}]),t}(n.Component));se.contextType=U;var ce=se,oe=new(function(){function e(){Object(u.a)(this,e),this.authenticated=!1}return Object(d.a)(e,[{key:"login",value:function(e){this.authenticated=!0,e(this.authenticated)}},{key:"logout",value:function(e){this.authenticated=!1}},{key:"isAuthenticated",value:function(){return this.authenticated}}]),e}()),ie=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={errors:null,isMounted:!1,user:{anonymous:!0}},a.getCurrentUser=Object(m.a)(o.a.mark(function e(){var t,n,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/me");case 2:if(200!==(t=e.sent).status){e.next=10;break}return e.next=6,t.json();case 6:n=e.sent,a.setState({user:Object(i.a)({},n,{anonymous:!1})}),e.next=14;break;case 10:return e.next=12,t.json();case 12:l=e.sent,a.setState({user:l});case 14:case"end":return e.stop()}},e)})),a.setUser=function(e){a.setState({user:e})},a.render=function(){return a.state.isMounted?l.a.createElement(U.Provider,{value:{setUser:a.setUser,user:a.state.user,auth:oe}},l.a.createElement(p.a,null,l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement(f.a,{exact:!0,path:"/",render:function(){return oe.isAuthenticated()?l.a.createElement(ce,null):l.a.createElement(L,null)}}),l.a.createElement(f.a,{exact:!0,path:"/",component:L}),l.a.createElement(f.a,{exact:!0,path:"/home",component:ce}),l.a.createElement(f.a,{exact:!0,path:"/event/:id",component:Q}),l.a.createElement(f.a,{exact:!0,path:"/myEvents/:id",component:Z}),l.a.createElement(f.a,{component:O}))))):l.a.createElement("div",null,"Loading...")},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getCurrentUser(),this.setState({isMounted:!0})}}]),t}(n.Component);s.a.render(l.a.createElement(ie,null),document.getElementById("root"))}},[[254,1,2]]]);
//# sourceMappingURL=main.be39824e.chunk.js.map