{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\dhany\\\\OneDrive\\\\Desktop\\\\full-stack-project-MERN-Stack-order-me\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\dhany\\\\OneDrive\\\\Desktop\\\\full-stack-project-MERN-Stack-order-me\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\dhany\\\\OneDrive\\\\Desktop\\\\full-stack-project-MERN-Stack-order-me\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\dhany\\\\OneDrive\\\\Desktop\\\\full-stack-project-MERN-Stack-order-me\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\dhany\\\\OneDrive\\\\Desktop\\\\full-stack-project-MERN-Stack-order-me\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\dhany\\\\OneDrive\\\\Desktop\\\\full-stack-project-MERN-Stack-order-me\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\dhany\\\\OneDrive\\\\Desktop\\\\full-stack-project-MERN-Stack-order-me\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\dhany\\\\OneDrive\\\\Desktop\\\\full-stack-project-MERN-Stack-order-me\\\\client\\\\src\\\\pages\\\\Login.js\";\nimport React, { Component } from 'react';\nimport { Link } from \"react-router-dom\";\nimport ApplicationContext from '../ApplicationContext';\nimport 'whatwg-fetch';\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n    _this.state = {\n      isLoading: true,\n      signUpError: '',\n      signInError: '',\n      signInEmail: '',\n      signInPassword: '',\n      signUpEmail: '',\n      signUpPassword: ''\n    };\n    _this.onTextboxChangeSignInEmail = _this.onTextboxChangeSignInEmail.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onTextboxChangeSignInPassword = _this.onTextboxChangeSignInPassword.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onTextboxChangeSignUpEmail = _this.onTextboxChangeSignUpEmail.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onTextboxChangeSignUpPassword = _this.onTextboxChangeSignUpPassword.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSignIn = _this.onSignIn.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSignUp = _this.onSignUp.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.logout = _this.logout.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      fetch('/api/account/verify').then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        _this2.setState({\n          isLoading: false\n        });\n      });\n    }\n  }, {\n    key: \"onTextboxChangeSignInEmail\",\n    value: function onTextboxChangeSignInEmail(event) {\n      this.setState({\n        signInEmail: event.target.value\n      });\n    }\n  }, {\n    key: \"onTextboxChangeSignInPassword\",\n    value: function onTextboxChangeSignInPassword(event) {\n      this.setState({\n        signInPassword: event.target.value\n      });\n    }\n  }, {\n    key: \"onTextboxChangeSignUpEmail\",\n    value: function onTextboxChangeSignUpEmail(event) {\n      this.setState({\n        signUpEmail: event.target.value\n      });\n    }\n  }, {\n    key: \"onTextboxChangeSignUpPassword\",\n    value: function onTextboxChangeSignUpPassword(event) {\n      this.setState({\n        signUpPassword: event.target.value\n      });\n    }\n  }, {\n    key: \"onSignUp\",\n    value: function onSignUp() {\n      var _this3 = this;\n\n      // Grab state\n      var _this$state = this.state,\n          signUpEmail = _this$state.signUpEmail,\n          signUpPassword = _this$state.signUpPassword;\n      this.setState({\n        isLoading: true\n      }); // Post request to backend\n\n      fetch('/api/account/signup', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: signUpEmail,\n          password: signUpPassword\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        console.log('json', json);\n\n        if (json.success) {\n          _this3.setState({\n            signUpError: json.message,\n            isLoading: false,\n            signUpEmail: '',\n            signUpPassword: ''\n          });\n        } else {\n          _this3.setState({\n            signUpError: json.message,\n            isLoading: false\n          });\n        }\n      });\n    }\n  }, {\n    key: \"onSignIn\",\n    value: function onSignIn() {\n      var _this4 = this;\n\n      // Grab state\n      var _this$state2 = this.state,\n          signInEmail = _this$state2.signInEmail,\n          signInPassword = _this$state2.signInPassword;\n      this.setState({\n        isLoading: true\n      }); // Post request to backend\n\n      fetch('/api/account/signin', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: signInEmail.trim(),\n          password: signInPassword.trim()\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        console.log('json', json);\n\n        if (json.success) {\n          _this4.setState({\n            signInError: json.message,\n            isLoading: false,\n            signInEmail: ''\n          }, function () {\n            _this4.context.setUser(_objectSpread({}, json.user, {\n              anonymous: false\n            }));\n          });\n        } else {\n          _this4.setState({\n            signInError: json.message,\n            isLoading: false\n          }, function () {\n            _this4.context.setUser({\n              anonymous: true\n            });\n          });\n        }\n      });\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      var _this5 = this;\n\n      this.context.setUser({\n        anonymous: true\n      });\n      this.setState({\n        isLoading: true\n      }, function () {\n        fetch('/api/account/logout').then(function (res) {\n          return res.json();\n        }).then(function (json) {\n          _this5.setState({\n            isLoading: false\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state3 = this.state,\n          isLoading = _this$state3.isLoading,\n          signInError = _this$state3.signInError,\n          signInEmail = _this$state3.signInEmail,\n          signInPassword = _this$state3.signInPassword,\n          signUpEmail = _this$state3.signUpEmail,\n          signUpPassword = _this$state3.signUpPassword,\n          signUpError = _this$state3.signUpError;\n      var user = this.context.user;\n\n      if (isLoading) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, \"Loading...\"));\n      }\n\n      if (user.anonymous) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }, signInError && React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }, signInError), React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183\n          },\n          __self: this\n        }, \"Log In To Start Ordering!\")), React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col d-flex flex-column justify-content-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"email\",\n          placeholder: \"Email\",\n          value: signInEmail,\n          className: \"flex-grow\",\n          onChange: this.onTextboxChangeSignInEmail,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        }), React.createElement(\"input\", {\n          type: \"password\",\n          placeholder: \"Password\",\n          value: signInPassword,\n          className: \"flex-grow\",\n          onChange: this.onTextboxChangeSignInPassword,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"col d-flex justify-content-end\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn btn-general\",\n          onClick: this.onSignIn,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204\n          },\n          __self: this\n        }, \"Login\")))), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 210\n          },\n          __self: this\n        }, signUpError ? React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213\n          },\n          __self: this\n        }, signUpError) : null, React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217\n          },\n          __self: this\n        }, \"Sign Up\")), React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col d-flex flex-column justify-content-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"email\",\n          placeholder: \"Email\",\n          value: signUpEmail,\n          className: \"flex-grow\",\n          onChange: this.onTextboxChangeSignUpEmail,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221\n          },\n          __self: this\n        }), React.createElement(\"input\", {\n          type: \"password\",\n          placeholder: \"Password\",\n          value: signUpPassword,\n          className: \"flex-grow\",\n          onChange: this.onTextboxChangeSignUpPassword,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"col d-flex justify-content-end\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 236\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn btn-general\",\n          onClick: this.onSignUp,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237\n          },\n          __self: this\n        }, \"Sign Up\")))));\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(Link, {\n        className: \"navbar-brand\",\n        to: \"/home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"btn btn-general\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, \"Take me to the Home Page\")));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nLogin.contextType = ApplicationContext;\nexport default Login;","map":{"version":3,"sources":["C:\\Users\\dhany\\OneDrive\\Desktop\\full-stack-project-MERN-Stack-order-me\\client\\src\\pages\\Login.js"],"names":["React","Component","Link","ApplicationContext","Login","props","state","isLoading","signUpError","signInError","signInEmail","signInPassword","signUpEmail","signUpPassword","onTextboxChangeSignInEmail","bind","onTextboxChangeSignInPassword","onTextboxChangeSignUpEmail","onTextboxChangeSignUpPassword","onSignIn","onSignUp","logout","fetch","then","res","json","setState","event","target","value","method","headers","body","JSON","stringify","email","password","console","log","success","message","trim","context","setUser","user","anonymous","contextType"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAAUC,IAAV,QAAsB,kBAAtB;AACA,OAAOC,kBAAP,MAA+B,uBAA/B;AACA,OAAO,cAAP;;IAEMC,K;;;;;AAGJ,iBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,+EAAMA,KAAN;AAEA,UAAKC,KAAL,GAAa;AACXC,MAAAA,SAAS,EAAE,IADA;AAEXC,MAAAA,WAAW,EAAE,EAFF;AAGXC,MAAAA,WAAW,EAAE,EAHF;AAIXC,MAAAA,WAAW,EAAE,EAJF;AAKXC,MAAAA,cAAc,EAAE,EALL;AAMXC,MAAAA,WAAW,EAAE,EANF;AAOXC,MAAAA,cAAc,EAAE;AAPL,KAAb;AAUA,UAAKC,0BAAL,GAAkC,MAAKA,0BAAL,CAAgCC,IAAhC,uDAAlC;AACA,UAAKC,6BAAL,GAAqC,MAAKA,6BAAL,CAAmCD,IAAnC,uDAArC;AACA,UAAKE,0BAAL,GAAkC,MAAKA,0BAAL,CAAgCF,IAAhC,uDAAlC;AACA,UAAKG,6BAAL,GAAqC,MAAKA,6BAAL,CAAmCH,IAAnC,uDAArC;AAEA,UAAKI,QAAL,GAAgB,MAAKA,QAAL,CAAcJ,IAAd,uDAAhB;AACA,UAAKK,QAAL,GAAgB,MAAKA,QAAL,CAAcL,IAAd,uDAAhB;AACA,UAAKM,MAAL,GAAc,MAAKA,MAAL,CAAYN,IAAZ,uDAAd;AApBiB;AAqBlB;;;;wCAEmB;AAAA;;AAClBO,MAAAA,KAAK,CAAC,qBAAD,CAAL,CACGC,IADH,CACQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OADX,EAEGF,IAFH,CAEQ,UAAAE,IAAI,EAAI;AACZ,QAAA,MAAI,CAACC,QAAL,CAAc;AAAEnB,UAAAA,SAAS,EAAE;AAAb,SAAd;AACD,OAJH;AAKD;;;+CAE0BoB,K,EAAO;AAChC,WAAKD,QAAL,CAAc;AACZhB,QAAAA,WAAW,EAAEiB,KAAK,CAACC,MAAN,CAAaC;AADd,OAAd;AAGD;;;kDAE6BF,K,EAAO;AACnC,WAAKD,QAAL,CAAc;AACZf,QAAAA,cAAc,EAAEgB,KAAK,CAACC,MAAN,CAAaC;AADjB,OAAd;AAGD;;;+CAE0BF,K,EAAO;AAChC,WAAKD,QAAL,CAAc;AACZd,QAAAA,WAAW,EAAEe,KAAK,CAACC,MAAN,CAAaC;AADd,OAAd;AAGD;;;kDAE6BF,K,EAAO;AACnC,WAAKD,QAAL,CAAc;AACZb,QAAAA,cAAc,EAAEc,KAAK,CAACC,MAAN,CAAaC;AADjB,OAAd;AAGD;;;+BAEU;AAAA;;AACT;AADS,wBAKL,KAAKvB,KALA;AAAA,UAGPM,WAHO,eAGPA,WAHO;AAAA,UAIPC,cAJO,eAIPA,cAJO;AAOT,WAAKa,QAAL,CAAc;AACZnB,QAAAA,SAAS,EAAE;AADC,OAAd,EAPS,CAWT;;AACAe,MAAAA,KAAK,CAAC,qBAAD,EAAwB;AAC3BQ,QAAAA,MAAM,EAAE,MADmB;AAE3BC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAFkB;AAK3BC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,UAAAA,KAAK,EAAEvB,WADY;AAEnBwB,UAAAA,QAAQ,EAAEvB;AAFS,SAAf;AALqB,OAAxB,CAAL,CASGU,IATH,CASQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OATX,EAUGF,IAVH,CAUQ,UAAAE,IAAI,EAAI;AACZY,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBb,IAApB;;AACA,YAAIA,IAAI,CAACc,OAAT,EAAkB;AAChB,UAAA,MAAI,CAACb,QAAL,CAAc;AACZlB,YAAAA,WAAW,EAAEiB,IAAI,CAACe,OADN;AAEZjC,YAAAA,SAAS,EAAE,KAFC;AAGZK,YAAAA,WAAW,EAAE,EAHD;AAIZC,YAAAA,cAAc,EAAE;AAJJ,WAAd;AAMD,SAPD,MAOO;AACL,UAAA,MAAI,CAACa,QAAL,CAAc;AACZlB,YAAAA,WAAW,EAAEiB,IAAI,CAACe,OADN;AAEZjC,YAAAA,SAAS,EAAE;AAFC,WAAd;AAID;AACF,OAzBH;AA0BD;;;+BAEU;AAAA;;AACT;AADS,yBAKL,KAAKD,KALA;AAAA,UAGPI,WAHO,gBAGPA,WAHO;AAAA,UAIPC,cAJO,gBAIPA,cAJO;AAOT,WAAKe,QAAL,CAAc;AACZnB,QAAAA,SAAS,EAAE;AADC,OAAd,EAPS,CAWT;;AACAe,MAAAA,KAAK,CAAC,qBAAD,EAAwB;AAC3BQ,QAAAA,MAAM,EAAE,MADmB;AAE3BC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAFkB;AAK3BC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,UAAAA,KAAK,EAAEzB,WAAW,CAAC+B,IAAZ,EADY;AAEnBL,UAAAA,QAAQ,EAAEzB,cAAc,CAAC8B,IAAf;AAFS,SAAf;AALqB,OAAxB,CAAL,CASGlB,IATH,CASQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OATX,EAUGF,IAVH,CAUQ,UAAAE,IAAI,EAAI;AACZY,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBb,IAApB;;AACA,YAAIA,IAAI,CAACc,OAAT,EAAkB;AAChB,UAAA,MAAI,CAACb,QAAL,CAAc;AACZjB,YAAAA,WAAW,EAAEgB,IAAI,CAACe,OADN;AAEZjC,YAAAA,SAAS,EAAE,KAFC;AAGZG,YAAAA,WAAW,EAAE;AAHD,WAAd,EAIG,YAAM;AACP,YAAA,MAAI,CAACgC,OAAL,CAAaC,OAAb,mBAAyBlB,IAAI,CAACmB,IAA9B;AAAoCC,cAAAA,SAAS,EAAE;AAA/C;AACD,WAND;AAOD,SARD,MAQO;AACL,UAAA,MAAI,CAACnB,QAAL,CAAc;AACZjB,YAAAA,WAAW,EAAEgB,IAAI,CAACe,OADN;AAEZjC,YAAAA,SAAS,EAAE;AAFC,WAAd,EAGG,YAAM;AACP,YAAA,MAAI,CAACmC,OAAL,CAAaC,OAAb,CAAqB;AAAEE,cAAAA,SAAS,EAAE;AAAb,aAArB;AACD,WALD;AAMD;AACF,OA5BH;AA6BD;;;6BAEQ;AAAA;;AACP,WAAKH,OAAL,CAAaC,OAAb,CAAqB;AAAEE,QAAAA,SAAS,EAAE;AAAb,OAArB;AACA,WAAKnB,QAAL,CAAc;AACZnB,QAAAA,SAAS,EAAE;AADC,OAAd,EAEG,YAAM;AACPe,QAAAA,KAAK,CAAC,qBAAD,CAAL,CACGC,IADH,CACQ,UAAAC,GAAG;AAAA,iBAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,SADX,EAEGF,IAFH,CAEQ,UAAAE,IAAI,EAAI;AACZ,UAAA,MAAI,CAACC,QAAL,CAAc;AAAEnB,YAAAA,SAAS,EAAE;AAAb,WAAd;AACD,SAJH;AAKD,OARD;AASH;;;6BAEU;AAAA,yBASH,KAAKD,KATF;AAAA,UAELC,SAFK,gBAELA,SAFK;AAAA,UAGLE,WAHK,gBAGLA,WAHK;AAAA,UAILC,WAJK,gBAILA,WAJK;AAAA,UAKLC,cALK,gBAKLA,cALK;AAAA,UAMLC,WANK,gBAMLA,WANK;AAAA,UAOLC,cAPK,gBAOLA,cAPK;AAAA,UAQLL,WARK,gBAQLA,WARK;AAAA,UAUCoC,IAVD,GAUU,KAAKF,OAVf,CAUCE,IAVD;;AAYP,UAAIrC,SAAJ,EAAe;AACb,eAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAL,CAAR;AACD;;AAED,UAAIqC,IAAI,CAACC,SAAT,EAAoB;AAClB,eACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGpC,WAAW,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAIA,WAAJ,CADlB,EAEE;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCADF,CAFF,EAKI;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAK,UAAA,SAAS,EAAC,+CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AACE,UAAA,IAAI,EAAC,OADP;AAEE,UAAA,WAAW,EAAC,OAFd;AAGE,UAAA,KAAK,EAAEC,WAHT;AAIE,UAAA,SAAS,EAAC,WAJZ;AAKE,UAAA,QAAQ,EAAE,KAAKI,0BALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,EASE;AACE,UAAA,IAAI,EAAC,UADP;AAEE,UAAA,WAAW,EAAC,UAFd;AAGE,UAAA,KAAK,EAAEH,cAHT;AAIE,UAAA,SAAS,EAAC,WAJZ;AAKE,UAAA,QAAQ,EAAE,KAAKK,6BALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UATF,CADA,EAkBA;AAAK,UAAA,SAAS,EAAC,gCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAQ,UAAA,SAAS,EAAC,iBAAlB;AAAoC,UAAA,OAAO,EAAE,KAAKG,QAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,CAlBA,CALJ,CAFF,EA8BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UA9BF,EA+BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UA/BF,EAgCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAEKX,WAAD,GACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAIA,WAAJ,CADF,GAEK,IAJT,EAME;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,CANF,EASE;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,+CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AACE,UAAA,IAAI,EAAC,OADP;AAEE,UAAA,WAAW,EAAC,OAFd;AAGE,UAAA,KAAK,EAAEI,WAHT;AAIE,UAAA,SAAS,EAAC,WAJZ;AAKE,UAAA,QAAQ,EAAE,KAAKK,0BALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,EAQE;AACE,UAAA,IAAI,EAAC,UADP;AAEE,UAAA,WAAW,EAAC,UAFd;AAGE,UAAA,KAAK,EAAEJ,cAHT;AAIE,UAAA,SAAS,EAAC,WAJZ;AAKE,UAAA,QAAQ,EAAE,KAAKK,6BALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UARF,CADF,EAiBE;AAAK,UAAA,SAAS,EAAC,gCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAQ,UAAA,SAAS,EAAC,iBAAlB;AAAoC,UAAA,OAAO,EAAE,KAAKE,QAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,CAjBF,CATF,CAhCF,CADF;AAkED;;AAED,aAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKE,oBAAC,IAAD;AAAM,QAAA,SAAS,EAAC,cAAhB;AAA+B,QAAA,EAAE,EAAC,OAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCADF,CALF,CAFF;AAeD;;;;EA9PiBnB,S;;AAAdG,K,CACG0C,W,GAAc3C,kB;AAgQvB,eAAeC,KAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport {  Link } from \"react-router-dom\";\r\nimport ApplicationContext from '../ApplicationContext';\r\nimport 'whatwg-fetch';\r\n\r\nclass Login extends Component {\r\n  static contextType = ApplicationContext;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isLoading: true,\r\n      signUpError: '',\r\n      signInError: '',\r\n      signInEmail: '',\r\n      signInPassword: '',\r\n      signUpEmail: '',\r\n      signUpPassword: '',\r\n    };\r\n\r\n    this.onTextboxChangeSignInEmail = this.onTextboxChangeSignInEmail.bind(this);\r\n    this.onTextboxChangeSignInPassword = this.onTextboxChangeSignInPassword.bind(this);\r\n    this.onTextboxChangeSignUpEmail = this.onTextboxChangeSignUpEmail.bind(this);\r\n    this.onTextboxChangeSignUpPassword = this.onTextboxChangeSignUpPassword.bind(this);\r\n\r\n    this.onSignIn = this.onSignIn.bind(this);\r\n    this.onSignUp = this.onSignUp.bind(this);\r\n    this.logout = this.logout.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch('/api/account/verify')\r\n      .then(res => res.json())\r\n      .then(json => {\r\n        this.setState({ isLoading: false });\r\n      });\r\n  }\r\n\r\n  onTextboxChangeSignInEmail(event) {\r\n    this.setState({\r\n      signInEmail: event.target.value,\r\n    });\r\n  }\r\n\r\n  onTextboxChangeSignInPassword(event) {\r\n    this.setState({\r\n      signInPassword: event.target.value,\r\n    });\r\n  }\r\n\r\n  onTextboxChangeSignUpEmail(event) {\r\n    this.setState({\r\n      signUpEmail: event.target.value,\r\n    });\r\n  }\r\n\r\n  onTextboxChangeSignUpPassword(event) {\r\n    this.setState({\r\n      signUpPassword: event.target.value,\r\n    });\r\n  }\r\n\r\n  onSignUp() {\r\n    // Grab state\r\n    const {\r\n      signUpEmail,\r\n      signUpPassword,\r\n    } = this.state;\r\n\r\n    this.setState({\r\n      isLoading: true,\r\n    });\r\n\r\n    // Post request to backend\r\n    fetch('/api/account/signup', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        email: signUpEmail,\r\n        password: signUpPassword,\r\n      }),\r\n    }).then(res => res.json())\r\n      .then(json => {\r\n        console.log('json', json);\r\n        if (json.success) {\r\n          this.setState({\r\n            signUpError: json.message,\r\n            isLoading: false,\r\n            signUpEmail: '',\r\n            signUpPassword: '',\r\n          });\r\n        } else {\r\n          this.setState({\r\n            signUpError: json.message,\r\n            isLoading: false,\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  onSignIn() {\r\n    // Grab state\r\n    const {\r\n      signInEmail,\r\n      signInPassword,\r\n    } = this.state;\r\n\r\n    this.setState({\r\n      isLoading: true,\r\n    });\r\n\r\n    // Post request to backend\r\n    fetch('/api/account/signin', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        email: signInEmail.trim(),\r\n        password: signInPassword.trim(),\r\n      }),\r\n    }).then(res => res.json())\r\n      .then(json => {\r\n        console.log('json', json);\r\n        if (json.success) {\r\n          this.setState({\r\n            signInError: json.message,\r\n            isLoading: false,\r\n            signInEmail: '',\r\n          }, () => {\r\n            this.context.setUser({...json.user, anonymous: false })\r\n          });\r\n        } else {\r\n          this.setState({\r\n            signInError: json.message,\r\n            isLoading: false,\r\n          }, () => {\r\n            this.context.setUser({ anonymous: true })\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  logout() {\r\n    this.context.setUser({ anonymous: true })\r\n    this.setState({\r\n      isLoading: true,\r\n    }, () => {\r\n      fetch('/api/account/logout')\r\n        .then(res => res.json())\r\n        .then(json => {\r\n          this.setState({ isLoading: false });\r\n        });\r\n    });\r\n}\r\n\r\n  render() {\r\n    const {\r\n      isLoading,\r\n      signInError,\r\n      signInEmail,\r\n      signInPassword,\r\n      signUpEmail,\r\n      signUpPassword,\r\n      signUpError,\r\n    } = this.state;\r\n    const { user } = this.context;\r\n\r\n    if (isLoading) {\r\n      return (<div><p>Loading...</p></div>);\r\n    }\r\n\r\n    if (user.anonymous) {\r\n      return (\r\n        <div>\r\n\r\n          <div>\r\n            {signInError && <p>{signInError}</p>}\r\n            <div className=\"row\">\r\n              <p>Log In To Start Ordering!</p>\r\n              </div>\r\n              <div className=\"row\">\r\n              <div className=\"col d-flex flex-column justify-content-center\">\r\n                <input\r\n                  type=\"email\"\r\n                  placeholder=\"Email\"\r\n                  value={signInEmail}\r\n                  className=\"flex-grow\"\r\n                  onChange={this.onTextboxChangeSignInEmail}\r\n                />\r\n\r\n                <input\r\n                  type=\"password\"\r\n                  placeholder=\"Password\"\r\n                  value={signInPassword}\r\n                  className=\"flex-grow\"\r\n                  onChange={this.onTextboxChangeSignInPassword}\r\n                />\r\n              </div>\r\n              <div className=\"col d-flex justify-content-end\">\r\n                <button className=\"btn btn-general\" onClick={this.onSignIn}>Login</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <br />\r\n          <br />\r\n          <div>\r\n            {\r\n              (signUpError) ? (\r\n                <p>{signUpError}</p>\r\n              ) : (null)\r\n            }\r\n            <div className=\"row\">\r\n              <p>Sign Up</p>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col d-flex flex-column justify-content-center\">\r\n                <input\r\n                  type=\"email\"\r\n                  placeholder=\"Email\"\r\n                  value={signUpEmail}\r\n                  className=\"flex-grow\"\r\n                  onChange={this.onTextboxChangeSignUpEmail}\r\n                />\r\n                <input\r\n                  type=\"password\"\r\n                  placeholder=\"Password\"\r\n                  value={signUpPassword}\r\n                  className=\"flex-grow\"\r\n                  onChange={this.onTextboxChangeSignUpPassword}\r\n                />\r\n              </div>\r\n              <div className=\"col d-flex justify-content-end\">\r\n                <button className=\"btn btn-general\" onClick={this.onSignUp}>Sign Up</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n     \r\n      <div>\r\n        \r\n        {/* <button className=\"btn btn-general\" onClick={this.logout}>Logout</button> */}\r\n        \r\n\r\n        <Link className=\"navbar-brand\" to=\"/home\">\r\n          <div className=\"btn btn-general\">Take me to the Home Page</div>\r\n        </Link>\r\n\r\n\r\n        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}